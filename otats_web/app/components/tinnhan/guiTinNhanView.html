<link href="app/components/tinnhan/guiTinNhanNhanVienStyle.css" rel="stylesheet" />
<div class="container-fluid">
    <!--<div class="content-title text-info">
        <i class="fas fa-id-card"></i> GỬI TIN NHẮN CHO NHÂN VIÊN
    </div>-->
    <div class="row set-height">
        <div class="col-sm-8">
            <div class="form-group row card shadow mb-4 ml-1">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h5 class="m-0 font-weight-bold text-info text-uppercase"> {{bindTextI18n('label_timkiemnhanvien')}}</h5>
                </div>
                <div class="card-body row">
                    <div class="col-sm-6">
                        <label for="noiDungTinNhan"><i class="fas fa-road"></i> {{bindTextI18n('header_khoangcach')}}: </label>
                        <input kendo-numeric-text-box k-min="0" id="noiDungTinNhan" ng-model="khoangCach" />
                    </div>
                    <div class="col-sm-6">
                        <label for="noiDungTinNhan"><i class="fas fa-plug"></i> {{bindTextI18n('label_trangthaiketnoi')}}: </label>
                        <select id="trangThai" kendo-combo-box="trangThai"
                                k-data-text-field="'text'"
                                k-data-value-field="'value'"
                                k-filter="'contains'"
                                k-auto-bind="false"
                                k-ng-model="trangThaiSelect"
                                k-data-source="trangThaiData"></select>
                    </div>
                </div>
                <div class="form-group text-center">
                    <a class="k-button k-primary" ng-click="loadgrid()"><i class="fas fa-search" style="padding-right:7px;"> </i>  {{bindTextI18n('button_timkiem')}} </a>
                </div>
            </div>

            <div class="form-group row card shadow mb-4 ml-1">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h5 class="m-0 font-weight-bold text-info text-uppercase"> {{bindTextI18n('label_chonnhanvienguitin')}}</h5>
                </div>
                <div class="card-body row">
                    <div class="col-sm-3">
                        <div id="treeview"></div>
                    </div>
                    <div class="col-sm-9">
                        <div kendo-grid="grid" k-data-source="gridData" k-options="gridOptions" id="grid"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4 set-height-right">
            <div class="map-body">
                <article class="controlBlockTimDiaChi">
                    <div class="form-inline">
                        <div class="form-group">
                            <input ng-model="timkiemdiachi" id="txtDiaChi" class="timkiemdiachi form-control" placeholder="{{bindTextI18n('label_nhapdiachi')}}" />
                        </div>
                        <div class="form-group">
                            <button class="btnTimDiaChi btn btn-primary" ng-click="movetomap()" id="btnTimDiaChi"><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                </article>
                <ng-map default-style="false" center="20.971365, 105.835165" zoom="10" class="map-guitin">
                    <marker ng-repeat="(idnhanvien, store) in stores"
                            position="{{store.viDo}}, {{store.kinhDo}}"
                            icon="{
                                url:'../../../assets/img/lo1.png',
                                labelOrigin:[10,-5]
                            }"
                            data="{{store}}"
                            label="{{store.tennhanvien}}"
                            title="{{store.tennhanvien}}" on-click="map.showInfoWindow('bar')">
                    </marker>

                    <info-window id="bar" ng-mouseover="mouseover()">
                        <ul style="margin:0;padding:0">
                            <li class="list-group-item active text-center">
                                {{bindTextI18n('label_tennhanvien')}}: {{anchor.data.tennhanvien}}
                            </li>
                            <li class="list-group-item">
                                {{bindTextI18n('label_tendangnhap')}}: {{anchor.data.tendangnhap}}
                            </li>
                            <li class="list-group-item">
                                {{bindTextI18n('label_trangthai')}}: {{anchor.data.trangthai}}
                            </li>
                            <li class="list-group-item">
                                {{bindTextI18n('label_thoigianhoatdonglancuoi')}}: {{anchor.data.thoigiancapnhat}}
                            </li>

                            <li class="list-group-item">
                                {{bindTextI18n('label_thoigianguitoadolancuoi')}}: {{anchor.data.thoigiancapnhat}}
                            </li>
                            <li class="list-group-item">
                                {{bindTextI18n('label_tinhtrangpin')}}: {{anchor.data.tinhtrangpin + '%'}}
                            </li>
                            <li class="list-group-item">
                                {{bindTextI18n('label_anhdaidien')}}: <img src="{{urlApi + anchor.data.anhdaidien}}" style="width:80px;height:80px" />
                            </li>
                            <li>
                                <textarea placeholder="{{bindTextI18n('label_noidung')}}" class="k-textbox" rows="4" style="width:100%;height:70px" ng-model="TinNhanForNV"></textarea>
                                <button class="k-button k-primary" ng-click="guiTinNhanForNV(anchor.data.idnhanvien,TinNhanForNV)">{{bindTextI18n('button_guitin')}}</button>
                            </li>
                        </ul>
                    </info-window>
                </ng-map>
            </div>
        </div>
        
            <div class="form-group col-sm-12 card shadow mb-4 ml-3 mr-5 p-0">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h5 class="m-0 font-weight-bold text-info text-uppercase "> {{bindTextI18n('label_noidungguitin')}}</h5>
                </div>
                <div class="card-body">
                    <label for="noiDungTinNhan"><i class="fas fa-envelope"></i> {{bindTextI18n('label_noidung')}}: </label>
                    <textarea type="text" style="height:40px;" class="k-textbox" id="noiDungTinNhan" ng-model="mes.noiDung"></textarea>
                </div>
                <div class="form-group text-center">
                    <a class="k-button k-primary" ng-click="guiTinNhan()"><i class="fas fa-paper-plane" style="padding-right:7px;"></i> <span> {{bindTextI18n('button_guitin')}}</span></a>
                </div>
            </div>
        
    </div>
    
    
</div>


